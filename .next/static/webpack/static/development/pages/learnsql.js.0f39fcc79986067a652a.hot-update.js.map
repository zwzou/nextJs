{"version":3,"file":"static/webpack/static\\development\\pages\\learnsql.js.0f39fcc79986067a652a.hot-update.js","sources":["webpack:///./pages/learnsql.js"],"sourcesContent":["import React from 'react';\r\nimport { withRouter } from 'next/router';\r\nimport Axios from 'axios';\r\n\r\nimport Admin from '../webjs/pages/admin';\r\nimport PlugTable from '../webjs/plugs/table';\r\nimport PlugDialog from '../webjs/plugs/dialog';\r\nimport PlugFormItem from '../webjs/plugs/formitem';\r\n\r\nclass Sql extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tthead: [\r\n\t\t\t\t{label: '姓名', prop: 'name', type: 'default'},\r\n\t\t\t\t{label: '性别', prop: 'sex', type: 'default'},\r\n\t\t\t\t{label: '年龄', prop: 'age', type: 'default'},\r\n\t\t\t\t{label: '描述', prop: 'des', type: 'default'},\r\n\t\t\t\t{label: '操作', operation: [{name: '修改'}, {name: '删除'}], type: 'operation'}\r\n\t\t\t],\r\n\t\t\ttableData: [],\r\n\t\t\tdialogTitle: '新增',\r\n\t\t\tdialogVisible: false,\r\n\t\t\tformData: {\r\n\t\t\t\tname: '',\r\n\t\t\t\tsex: '',\r\n\t\t\t\tage: '',\r\n\t\t\t\tdes: ''\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount () {\r\n\t\tthis.getTableData();\r\n\t}\r\n\r\n\tinitFormData () {\r\n\t\tthis.setState(Object.assign(this.state.formData, {\r\n\t\t\tname: '',\r\n\t\t\tsex: '',\r\n\t\t\tage: '',\r\n\t\t\tdes: ''\r\n\t\t}));\r\n\t}\r\n\r\n\tgetTableData () {\r\n\t\tAxios.get('/api/getData').then((res) => {\r\n\t\t\tthis.setState({tableData: res.data});\r\n\t\t})\r\n\t}\r\n\r\n\thandlerClose () {\r\n\t\tthis.setState({dialogVisible: false});\r\n\t}\r\n\r\n\tonOpenDialog () {\r\n\t\tthis.setState({dialogVisible: true});\r\n\t\tthis.initFormData();\r\n\r\n\t\tthis.setState({dialogTitle: '新增'});\r\n\t}\r\n\r\n\tonConfirm () {\r\n\t\tif (this.state.dialogTitle === '新增') {\r\n\t\t\tlet params = this.state.formData;\r\n\t\t\tAxios.get('/api/addInfo', {params: params}).then((res) => {\r\n\t\t\t\tif (res.data.success) {\r\n\t\t\t\t\tReact.$prompt('新增成功！');\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\tif (this.state.dialogTitle === '修改') {\r\n\t\t\tlet params = this.state.formData;\r\n\t\t\tAxios.get('/api/modInfo', {params: params}).then((res) => {\r\n\t\t\t\tif (res.data.success) {\r\n\t\t\t\t\tReact.$prompt('修改成功！');\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\tthis.getTableData();\r\n\t\tthis.handlerClose();\r\n\t}\r\n\r\n\tinputVal (label, value) {\r\n\t\tlet obj = {};\r\n\t\tobj[label] = value;\r\n\r\n\t\tthis.setState(Object.assign(this.state.formData, obj));\r\n\t}\r\n\r\n\thandlerOperation(name, lineData) {\r\n\t\tif (name === '修改') {\r\n\t\t\tthis.setState({dialogTitle: name});\r\n\t\t\tthis.setState({dialogVisible: true});\r\n\t\t\tthis.setState(Object.assign(this.state.formData, lineData));\r\n\t\t}\r\n\t\tif (name === '删除') {\r\n\t\t\tconst params = {\r\n\t\t\t\tid: lineData.person_id\r\n\t\t\t};\r\n\t\t\tAxios.get('/api/delInfo', {params: params}).then((res) => {\r\n\t\t\t\tif (res.data.success) {\r\n\t\t\t\t\tthis.getTableData();\r\n\t\t\t\t\tReact.$prompt('删除成功！');\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst dialogFooter = (\r\n\t\t\t<div className={'dialog-footer'}>\r\n\t\t\t\t<button onClick={() => this.setState({dialogVisible: false})}>取消</button>\r\n\t\t\t\t<button onClick={() => this.onConfirm()}>确定</button>\r\n\t\t\t\t<style jsx>{`\r\n\t\t\t\t\t.dialog-footer {\r\n\t\t\t\t\t\tpadding: 8px 10px;\r\n\t\t\t\t\t\ttext-align: right;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbutton {\r\n\t\t\t\t\t\tbackground: #fff;\r\n\t\t\t\t\t\tborder: 1px solid #999;\r\n\t\t\t\t\t\tborder-radius: 3px;\r\n\t\t\t\t\t\tpadding: 6px 12px;\r\n\t\t\t\t\t\tcursor: pointer;\r\n\t\t\t\t\t\tout-inline: none;\r\n\t\t\t\t\t\tmargin-left: 12px;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t`}</style>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\tconst formData = this.state.formData;\r\n\t\tconst dialogContent = (\r\n\t\t\t<div className={'mod-form'}>\r\n\t\t\t\t<div className={'form-line'}>\r\n\t\t\t\t\t<PlugFormItem label=\"姓名\">\r\n\t\t\t\t\t\t<input type=\"text\" value={formData.name}\r\n\t\t\t\t\t\t   placeholder=\"请输入姓名\"\r\n\t\t\t\t\t\t   onChange={(e) => this.inputVal('name', e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</PlugFormItem>\r\n\t\t\t\t\t<PlugFormItem label=\"性别\">\r\n\t\t\t\t\t\t<input type=\"text\" value={formData.sex}\r\n\t\t\t\t\t\t   placeholder=\"请输入性别\"\r\n\t\t\t\t\t\t   onChange={(e) => this.inputVal('sex', e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</PlugFormItem>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<PlugFormItem label=\"年龄\">\r\n\t\t\t\t\t\t<input type=\"text\" value={formData.age}\r\n\t\t\t\t\t\t   placeholder=\"请输入年龄\"\r\n\t\t\t\t\t\t   onChange={(e) => this.inputVal('age', e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</PlugFormItem>\r\n\t\t\t\t\t<PlugFormItem label=\"描述\">\r\n\t\t\t\t\t\t<textarea name=\"\" id=\"\" rows=\"3\" value={formData.des}\r\n\t\t\t\t\t\t\tplaceholder=\"请输入描述\"\r\n\t\t\t\t\t\t  \tonChange={(e) => this.inputVal('des', e.target.value)}\r\n\t\t\t\t\t\t></textarea>\r\n\t\t\t\t\t</PlugFormItem>\r\n\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t<style jsx>{`\r\n\t\t\t\t\t.mod-form {\r\n\t\t\t\t\t\twidth: 600px;\r\n\t\t\t\t\t\tpadding: 40px 30px;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t.form-line {\r\n\t\t\t\t\t\tmargin-bottom: 30px;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinput {\r\n                        height: 24px;\r\n                        padding-left: 4px;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttextarea,input {\r\n\t\t\t\t\t\twidth: 175px;\r\n\t\t\t\t\t\tborder:1px solid #bbb;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t`}</style>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\treturn (\r\n\t\t\t<Admin>\r\n\t\t\t\t<div className=\"learSql\">\r\n\t\t\t\t\t<div className={'optWarp'}>\r\n\t\t\t\t\t\t<button onClick={() => this.onOpenDialog()}>新增</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<PlugTable\r\n\t\t\t\t\t\tthead={this.state.thead}\r\n\t\t\t\t\t\ttableData={this.state.tableData}\r\n\t\t\t\t\t   \tonOperation={(name, lineData) => this.handlerOperation(name, lineData)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<PlugDialog\r\n\t\t\t\t\t\ttitle={this.state.dialogTitle}\r\n\t\t\t\t\t\tfooter={dialogFooter}\r\n\t\t\t\t\t\tchildren={dialogContent}\r\n\t\t\t\t\t\tvisible={this.state.dialogVisible}\r\n\t\t\t\t\t\tonClose={() => this.handlerClose()}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t</PlugDialog>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<style jsx>{`\r\n\t\t\t\t\t.learSql {\r\n\t\t\t\t\t\tpadding: 100px;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t.optWarp {\r\n\t\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\t\tpadding-bottom: 20px;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t.optWarp button {\r\n\t\t\t\t\t\tfloat: right;\r\n\t\t\t\t\t\tbackground: #fff;\r\n\t\t\t\t\t\tborder: 1px solid #999;\r\n\t\t\t\t\t\tborder-radius: 3px;\r\n\t\t\t\t\t\tpadding: 6px 10px;\r\n\t\t\t\t\t\tcursor: pointer;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t`}</style>\r\n\t\t\t</Admin>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default withRouter(Sql);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAXA;AAFA;AAoBA;AACA;;;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;;;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;;;AAEA;AACA;AAAA;AAAA;AACA;;;AAEA;AACA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AACA;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;;;AAEA;AACA;AACA;AAEA;AACA;;;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;;;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAFA;AAAA;AAsBA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAFA;AAAA;AAKA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAFA;AAAA;AAMA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAFA;AAAA;AAKA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAFA;AAAA;AAvBA;AAAA;AAqDA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAAA;AAAA;AAHA;AAMA;AACA;AACA;AACA;AACA;AAAA;AAAA;AALA;AAVA;AAAA;AAyCA;;;;AA7NA;AACA;AA+NA;;;;A","sourceRoot":""}